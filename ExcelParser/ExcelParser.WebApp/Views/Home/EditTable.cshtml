@model TableRowViewModel
@{
    Layout = "_TableLayout";
    List<List<ExcelParser.Parser.Models.TableRow>> groupedRows = Model.TableRows
        .GroupBy(row => row.BankName)
        .Select(group => group.ToList())
        .ToList();
}

<body>
<form method="post" asp-controller="Home" asp-action="UpdateTable">
    <input type="hidden" name="filePath" value="@Model.FilePath"/>
    <div class="row px-xl-5">
        <div class="col-lg-12 table-responsive mb-5">
            @foreach (var tableRows in groupedRows)
            {
                <h3>Id : @tableRows[0].Id</h3>
                <h3>Банк : @tableRows[0].BankName</h3>
                <table id="cartTable" class="table table-bordered text-center mb-0">
                    <thead class="bg-secondary text-dark">
                    <tr>
                        <th>Кредитный продукт</th>
                        <th>Срок min</th>
                        <th>Срок max</th>
                        <th>Период</th>
                        <th>Ставка min</th>
                        <th>Ставка max</th>
                        <th>Примечание</th>
                    </tr>
                    </thead>
                    <tbody class="align-middle">
                    @foreach (var tableRow in tableRows)
                    {
                        <tr>
                            <td><input type="text" name="creditProduct" value="@(tableRow.CreditProduct != null ? tableRow.CreditProduct : "")"/></td>
                            <td><input type="number" name="termMin" value="@(tableRow.TermMin != null ? tableRow.TermMin.ToString() : "")"/></td>
                            <td><input type="number" name="termMax" value="@(tableRow.TermMax != null ? tableRow.TermMax.ToString() : "")"/></td>
                            <td><input type="text" name="period" value="@(tableRow.Period != null ? tableRow.Period : "")"/></td>
                            <td><input type="text" name="rateMin" value="@(tableRow.RateMin != null ? tableRow.RateMin.ValueString : "")"/></td>
                            <td><input type="text" name="rateMax" value="@(tableRow.RateMax != null ? tableRow.RateMax.ValueString : "")"/></td>
                            <td><input type="text" name="note" value="@(tableRow.Note != null ? tableRow.Note : "")"/></td>
                        </tr>
                    }

                    </tbody>
                </table>
            }
        </div>
    </div>
    <button type="submit">Сохранить</button>
</form>
</body>